/* ===== 变量与基础 ===== */
:root{
  --bg:url("https://gitee.com/fbqdnq/wenyou/raw/main/img/22.webp");
  --sunset:#F06464; --gold:#FFB35A; --dusk:#214431; --ink:#0E2A1F; --fog:#93A6B1;
  --milk:rgba(255,255,255,.92); --glass:rgba(255,200,150,.12); --glass-strong:rgba(20,60,45,.16);
  --shadow:0 12px 40px rgba(14,42,31,.10); --radius:12px; --line:1.7;
  --pad:clamp(14px,2vw,24px); --fz:clamp(14px,1.2vw + .5rem,18px);
  --b1:rgba(255,179,90,.8); --b2:rgba(33,68,49,.9);
}
*,*::before,*::after{box-sizing:border-box}
html{font-size:var(--fz)}
body{margin:0;min-height:100dvh;color:var(--milk);background:#000;line-height:var(--line);overflow-x:hidden}
h1,h2,h3,h4{margin:0 0 .6em;font-weight:600}
p{margin:.6em 0}
ul,ol{margin:.4em 0;padding-left:1.2em}
button{font:inherit;color:inherit;background:transparent;border:0;cursor:pointer}

/* ===== 背景与全局层 ===== */
body::before{content:"";position:fixed;inset:0;z-index:-5;background-image:var(--bg);background-size:cover;background-position:center;filter:contrast(1.05) saturate(1.02)}
.xia{position:fixed;inset:0;z-index:-4;pointer-events:none;mix-blend-mode:soft-light;opacity:.22;background:
  linear-gradient(90deg,rgba(240,100,100,0),rgba(240,100,100,.25),rgba(255,179,90,.2),rgba(240,100,100,0));
  background-size:200% 100%;animation:xia 24s linear infinite}
@keyframes xia{to{background-position:-200% 0}}

.heat{position:fixed;inset:0;z-index:-3;pointer-events:none;opacity:.14;filter:url(#heat-displace)}
#particles{position:fixed;inset:0;z-index:-2;pointer-events:none}

.sun{position:fixed;inset:auto 0 6vh 0;height:36vh;z-index:-1;display:grid;place-items:end center;pointer-events:none}
.sun::before{content:"";width:42vmin;height:42vmin;border-radius:50%;background:radial-gradient(circle, rgba(255,223,168,.55), rgba(255,223,168,0) 60%);
  filter:url(#sun-glow);animation:halo 6s ease-in-out infinite;transform:translateX(18vw)}
@keyframes halo{0%,100%{opacity:.5}50%{opacity:.66}}

.grain{position:fixed;inset:0;z-index:-1;pointer-events:none;filter:url(#film-grain)}

/* 色温细微呼吸（可关闭） */
@keyframes hue{0%,100%{filter:hue-rotate(-2deg)}50%{filter:hue-rotate(2deg)}}
body{animation:hue 18s ease-in-out infinite}

/* ===== 内容栈 ===== */
.stack{width:min(100%,1080px);margin:0 auto;padding:12vh clamp(12px,3vw,28px) 12vh;display:flex;flex-direction:column;gap:18px}
.card{position:relative;padding:var(--pad);border-radius:var(--radius);overflow:hidden;isolation:isolate;
  background:linear-gradient(180deg, rgba(255,179,90,.12), rgba(240,100,100,.12));backdrop-filter:saturate(1.1) blur(8px);box-shadow:var(--shadow);
  transform:translateY(8px);opacity:0;animation:enter .24s ease-out both}
@keyframes enter{to{transform:translateY(0);opacity:1}}
.card:nth-child(1){animation-delay:.02s}.card:nth-child(2){animation-delay:.06s}.card:nth-child(3){animation-delay:.10s}
.card:nth-child(4){animation-delay:.14s}.card:nth-child(5){animation-delay:.18s}

.card::before,.card::after{content:"";position:absolute;inset:0;border-radius:inherit;pointer-events:none}
.card::before{border:1px solid var(--b2);mix-blend-mode:overlay;opacity:.9}
.card::after{inset:1px;border-radius:calc(var(--radius) - 1px);border:.5px solid var(--b1);mask:
  linear-gradient(90deg,transparent,rgba(255,255,255,.8),transparent) 0 0/300% 100% no-repeat;animation:flow 36s linear infinite;opacity:.85}
@keyframes flow{to{mask-position:300% 0}}

.decor-wind{position:absolute;left:-15%;right:-15%;top:0;height:10px;opacity:.06;background:linear-gradient(90deg,#fff,transparent);transform:skewY(-15deg)}

.s-scene{min-height:auto}
.s-narration{background:linear-gradient(180deg, rgba(255,179,90,.08), rgba(240,100,100,.08));backdrop-filter:blur(6px)}
.s-events .event-list{display:grid;gap:12px}

.btns{display:flex;flex-direction:column;gap:10px}
.pill{padding:.6em 1.1em;border-radius:999px;background:rgba(14,42,31,.25);border:1px solid rgba(255,223,168,.35);box-shadow:inset 0 0 0 1px rgba(33,68,49,.35);position:relative;overflow:hidden}
.pill::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,223,168,.28),transparent);transform:translateX(-100%);transition:transform .45s}
.pill:hover::after{transform:translateX(100%)}
.pill.ghost{background:transparent;border-color:rgba(255,223,168,.2)}
/* 每个行动选项独占一行 */
.btns .pill{width:100%;text-align:left}

.stats{display:flex;flex-wrap:wrap;gap:10px;row-gap:8px;list-style:none;padding:0}
.stats li{padding:.35em .7em;border-radius:8px;background:rgba(14,42,31,.22);border:1px dashed rgba(255,223,168,.25)}

/* ===== 右侧抽屉状态栏 ===== */
.toggle{position:fixed;right:10px;top:50%;transform:translateY(-50%);z-index:60;padding:.7em .9em;border-radius:14px;
  background:rgba(20,60,45,.6);backdrop-filter:blur(6px);border:1px solid rgba(255,223,168,.35);box-shadow:var(--shadow)}
.drawer{position:fixed;right:0;top:0;bottom:0;width:min(86vw,380px);z-index:80;background:var(--glass-strong);
  backdrop-filter:saturate(1.1) blur(12px);transform:translateX(100%);opacity:0;transition:transform .26s ease,opacity .26s ease;
  box-shadow:-16px 0 40px rgba(0,0,0,.25);border-left:1px solid rgba(255,223,168,.25)}
.drawer.open{transform:translateX(0);opacity:1}

.drawer-head{position:sticky;top:0;display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:linear-gradient(180deg, rgba(255,223,168,.12), transparent);border-bottom:1px solid rgba(255,223,168,.22)}
.drawer-head h3{font-size:1.05rem}
.drawer-close{padding:.4em .6em;border-radius:10px;background:rgba(14,42,31,.35);border:1px solid rgba(255,223,168,.3)}

.drawer-body{height:100%;overflow:auto;padding:12px 16px 24px}
/* 滚动条美化 */
.drawer-body::-webkit-scrollbar{width:10px}
.drawer-body::-webkit-scrollbar-track{background:rgba(255,255,255,.05);border-radius:999px}
.drawer-body::-webkit-scrollbar-thumb{background:rgba(255,223,168,.35);border-radius:999px;border:2px solid transparent}
.drawer-body::-webkit-scrollbar-thumb:hover{background:rgba(255,223,168,.5)}
.drawer-body{scrollbar-width:thin;scrollbar-color:rgba(255,223,168,.35) rgba(255,255,255,.05)}

.kv{list-style:none;margin:0;padding:0;display:grid;grid-template-columns:1fr auto;gap:8px 12px}
.kv li{display:contents}.kv span{opacity:.85}.kv strong{justify-self:end}

.bar{display:grid;grid-template-columns:120px 1fr;align-items:center;margin:10px 0}
.bar span{opacity:.85}
.bar i{height:8px;display:block;border-radius:999px;background:linear-gradient(90deg, rgba(255,179,90,.15), rgba(240,100,100,.15));position:relative}
.bar i::before{content:"";position:absolute;inset:auto auto auto 0;height:8px;width:var(--val,40%);border-radius:inherit;background:linear-gradient(90deg,#FFB35A,#F06464);
  mask:linear-gradient(90deg, transparent, #000 30%, #000 70%, transparent) 0/40% 100% repeat-x;animation:barflow 8s linear infinite}
@keyframes barflow{to{mask-position:200% 0}}

/* ===== 可访问与性能降级 ===== */
@media (prefers-reduced-motion: reduce){*{animation:none!important;transition:none!important}.heat{filter:none}}
@media (max-width:1200px){.stack{padding-top:10vh;padding-bottom:10vh}}
@media (max-width:768px){.s-scene{min-height:auto}.toggle{right:8px}}
@media (max-width:480px){.stack{gap:14px}.pill{padding:.55em 1em}}